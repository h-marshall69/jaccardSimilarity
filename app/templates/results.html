{% extends "base.html" %}

{% block title %} Jaccard Similarity {% endblock %}

{% block header %} Results {% endblock %}

{% block content %}
<div class="results">
    <h2>Resultados del procesamiento: {{ filename }}</h2>
    
    <div class="file-info">
        <h3>üìã Informaci√≥n del dataset</h3>
        <p><strong>Usuarios:</strong> {{ results.users|length }}</p>
        <p><strong>Categor√≠as √∫nicas:</strong> {{ results.categories|length }}</p>
    </div>

    <div class="visualizations">
        <h3>üìä Visualizaciones</h3>
        
        {% if results.jaccard_heatmap %}
        <div class="visualization-item">
            <h4>Matriz de Similitud de Jaccard</h4>
            <img src="{{ url_for('static', filename='images/jaccard_heatmap.png') }}" 
                 alt="Matriz Jaccard" class="viz-image">
        </div>
        {% endif %}

        {% if results.semantic_heatmap %}
        <div class="visualization-item">
            <h4>Matriz de Similitud Sem√°ntica</h4>
            <img src="{{ url_for('static', filename='images/semantic_heatmap.png') }}" 
                 alt="Matriz Sem√°ntica" class="viz-image">
        </div>
        {% endif %}

        {% if results.dendrogram %}
        <div class="visualization-item">
            <h4>Dendrograma de Agrupamiento</h4>
            <img src="{{ url_for('static', filename='images/dendrogram.png') }}" 
                 alt="Dendrograma" class="viz-image">
        </div>
        {% endif %}
    </div>

    <div class="raw-data">
        <h3>üìù Datos Originales</h3>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Usuario</th>
                        {% for i in range(5) %}
                        <th>Categor√≠a {{ i+1 }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in results.original_data %}
                    <tr>
                        <td>{{ row[results.users[0]] if results.users else '' }}</td>
                        {% for i in range(5) %}
                        <td>{{ row['categoria_' ~ (i+1)] if 'categoria_' ~ (i+1) in row else '' }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <a href="{{ url_for('main.index') }}" class="btn">Procesar otro dataset</a>
</div>
{% endblock %}